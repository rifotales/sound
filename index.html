<!DOCTYPE html>
<html lang="ru" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rifotales Sound Path</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tone@14.7.58/build/Tone.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-1: #071226;
            --bg-2: #07183a;
            --accent: #60a5fa;
            --accent-2: #34d399;
            --neon: #7dd3fc;
            --glass: rgba(18,24,44,0.55);
            --muted: #9aa7c6;
            --grid-line: rgba(125,211,252,0.06);
            --grid-dot: rgba(125,211,252,0.10);
            --glow-strong: rgba(125,211,252,0.95);
        }
        html, body { height: 100%; }
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            background: linear-gradient(180deg, var(--bg-1), var(--bg-2));
            color: #e6eef8;
            overflow-x: hidden;
        }
        h1, h2, h3 { font-family: 'Orbitron', sans-serif; }
        #bgCanvas { position: fixed; inset: 0; z-index: -2; width: 100%; height: 100%; pointer-events: none; mix-blend-mode: screen; }
        .noise { position: fixed; inset: 0; z-index: -1; opacity: 0.06; background-image: radial-gradient(rgba(255,255,255,0.02) 1px, transparent 1px); background-size: 3px 3px; pointer-events: none; }
        header { backdrop-filter: blur(8px); background: linear-gradient(180deg, rgba(6,10,20,0.55), rgba(6,10,20,0.35)); border-bottom: 1px solid rgba(96,165,250,0.06); }
        .nav-link { transition: all .25s ease; color: var(--muted); padding: .25rem .5rem; border-radius: .35rem; position: relative; overflow: hidden; }
        .nav-link.active { color: var(--accent-2); box-shadow: 0 6px 20px rgba(52,211,153,0.06); transform: translateY(-2px); }
        .nav-link::before { content: ''; position: absolute; inset: 0; background: var(--accent-2); opacity: 0; transition: opacity .3s ease, transform .3s ease; transform: scaleX(0); transform-origin: left; z-index: -1; }
        .nav-link.active::before, .nav-link:hover::before { opacity: 0.08; transform: scaleX(1); }
        .section { min-height: 100vh; padding: 8rem 1.25rem 4rem; display: flex; flex-direction: column; justify-content: center; align-items: center; position: relative; }
        .section::before { content: ''; position: absolute; inset: 0; background: linear-gradient(180deg, rgba(20,30,50,0.12), rgba(5,8,15,0.35)); z-index: 0; pointer-events: none; }
        .section-content { z-index: 10; width: 100%; }
        .glass-card { background: var(--glass); backdrop-filter: blur(10px); border: 1px solid rgba(96,165,250,0.09); border-radius: 1.25rem; padding: 1.5rem; transition: transform .45s cubic-bezier(.2,.9,.2,1), box-shadow .45s; box-shadow: 0 8px 30px rgba(2,6,23,0.6); }
        .glass-card:hover { transform: translateY(-10px) scale(1.01); box-shadow: 0 30px 80px rgba(96,165,250,0.08); }
        .glass-card .mini-legend { font-size: .8rem; color: var(--muted); margin-top: .5rem; }
        .chart-container { position: relative; width: 100%; max-width: 920px; margin: 0 auto; height: 320px; }
        .control-slider { accent-color: var(--accent-2); transition: all .3s ease; }
        .control-slider::-webkit-slider-thumb { box-shadow: 0 0 8px var(--accent-2); }
        .control-slider:hover::-webkit-slider-thumb { box-shadow: 0 0 16px var(--accent-2); }
        @keyframes glow-pulse { 0%, 100% { box-shadow: 0 0 8px rgba(125,211,252,0.4), inset 0 0 4px rgba(125,211,252,0.2); } 50% { box-shadow: 0 0 20px rgba(125,211,252,0.8), inset 0 0 10px rgba(125,211,252,0.6); } }
        .glow-border { position: relative; animation: glow-pulse 3s infinite ease-in-out; }
        .glow-border::after { content: ''; position: absolute; inset: -2px; border-radius: 1.25rem; background: linear-gradient(90deg, rgba(125,211,252,0.06), rgba(99,102,241,0.06)); filter: blur(12px); opacity: .85; pointer-events: none; transition: opacity .5s ease, filter .5s ease; }
        .glow-border:hover::after { opacity: 1; filter: blur(16px); }
        .wave-visual { position: absolute; left: 0; right: 0; bottom: 0; height: 40%; pointer-events: none; opacity: .08; }
        .neon-dot { width: 10px; height: 10px; border-radius: 50%; background: var(--neon); box-shadow: 0 0 18px var(--neon); opacity: .95; }
        .accordion-button { width: 100%; padding: 0; background: transparent; border: none; display: flex; justify-content: space-between; align-items: center; }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height .55s cubic-bezier(.22,.9,.2,1); }
        .sound-wave-anim { animation: sound-bounce 4s ease-out infinite; }
        @keyframes sound-bounce { 0% { transform: scale(0.1); opacity: 0; } 5% { opacity: 1; } 25% { transform: scale(1); opacity: 0; } 100% { transform: scale(1); opacity: 0; } }
        .delay-1 { animation-delay: 0.5s; } .delay-2 { animation-delay: 1s; } .delay-3 { animation-delay: 1.5s; }
        .reflection-line { transform-origin: left; animation: bounce-rotate 2s cubic-bezier(0.175, 0.885, 0.32, 1.275) infinite; }
        @keyframes bounce-rotate { 0%, 100% { transform: rotate(0deg); } 50% { transform: rotate(10deg); } }
        @keyframes floaty { 0% { transform: translateY(0); } 50% { transform: translateY(-8px); } 100% { transform: translateY(0); } }
        .floaty { animation: floaty 6s ease-in-out infinite; }
        .neon-button { position: relative; background: rgba(52, 211, 153, 0.15); border: 1px solid var(--accent-2); box-shadow: 0 0 8px var(--accent-2), inset 0 0 4px var(--accent-2); transition: all 0.3s ease; text-shadow: 0 0 4px var(--accent-2); }
        .neon-button:hover { background: rgba(52, 211, 153, 0.3); box-shadow: 0 0 16px var(--accent-2), inset 0 0 8px var(--accent-2); transform: translateY(-2px) scale(1.03); }
        #stopBtn.neon-button:hover {
            background: rgba(244, 114, 182, 0.35) !important;
            border-color: #f472b6 !important;
            box-shadow: 0 0 18px #f472b6, inset 0 0 6px #f472b6 !important;
            text-shadow: 0 0 6px #f472b6 !important;
            transform: translateY(-2px) scale(1.03);
        }
        .stage-title {
            color: var(--neon);
            text-shadow: 0 2px 8px rgba(125,211,252,0.22), 0 0 18px rgba(125,211,252,0.08);
            transition: text-shadow .35s ease, transform .35s ease;
            display: inline-block;
            padding: .05rem .2rem;
            border-radius: .25rem;
        }
        .stage-title.glow { animation: stageGlow 3.6s ease-in-out infinite; }
        @keyframes stageGlow {
            0% { text-shadow: 0 2px 6px rgba(125,211,252,0.12), 0 0 10px rgba(125,211,252,0.04); transform: translateY(0); }
            50% { text-shadow: 0 6px 18px rgba(125,211,252,0.32), 0 0 36px rgba(125,211,252,0.18); transform: translateY(-2px); }
            100% { text-shadow: 0 2px 6px rgba(125,211,252,0.12), 0 0 10px rgba(125,211,252,0.04); transform: translateY(0); }
        }
        @media (prefers-reduced-motion: reduce) {
            * { animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; }
        }
        @media (min-width: 768px) { .section { padding: 8rem 4rem 5rem; } .chart-container { height: 420px; } }
        .neon-text-light { color: #d8f5ff; text-shadow: 0 0 4px rgba(125,211,252,0.06); }
        .integrated-text { white-space: normal; color: var(--neon); }
        .integrated-text ul { list-style: disc; margin-left: 1rem; color: #d8f5ff; }
        .integrated-text li { margin-bottom: .5rem; }
        .step-block { margin-bottom: 2rem; border-left: 4px solid var(--accent-2); padding-left: 1rem; }
        .step-block h5 { font-family: 'Orbitron', sans-serif; font-size: 1.25rem; color: var(--accent-2); margin-bottom: 0.5rem; }
        .branch-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; }
        .branch-card { background: var(--glass); backdrop-filter: blur(12px); border: 1px solid rgba(52,211,153,0.15); border-radius: 0.75rem; padding: 1rem; transition: all 0.3s ease; }
        .branch-card:hover { box-shadow: 0 0 20px rgba(52,211,153,0.2); transform: translateY(-5px); }
        .branch-card h6 { font-size: 1rem; color: var(--neon); margin-bottom: 0.5rem; }
        .stage-progress { display: flex; align-items: center; margin-bottom: 1rem; }
        .stage-progress .step-number { background: var(--accent-2); color: var(--bg-1); font-weight: bold; border-radius: 50%; width: 2rem; height: 2rem; display: flex; align-items: center; justify-content: center; margin-right: 1rem; }
        .branch-tree { position: relative; padding-left: 2rem; }
        .branch-tree::before { content: ''; position: absolute; left: 1rem; top: 0; bottom: 0; width: 2px; background: var(--muted); opacity: 0.3; }
        .branch-tree .branch-card { margin-left: 1rem; position: relative; }
        .branch-tree .branch-card::before { content: ''; position: absolute; left: -2rem; top: 50%; width: 2rem; height: 2px; background: var(--muted); opacity: 0.3; }
    </style>
</head>
<body class="overflow-x-hidden">
    <canvas id="bgCanvas" aria-hidden="true"></canvas>
    <div class="noise" aria-hidden="true"></div>
    <header class="fixed top-0 left-0 w-full z-50">
        <nav class="container mx-auto px-6 py-4">
            <ul class="flex justify-center space-x-4 md:space-x-8 text-sm md:text-base font-medium text-gray-400">
                <li><a href="#stage1" class="nav-link">Природа</a></li>
                <li><a href="#stage2" class="nav-link">Распространение</a></li>
                <li><a href="#stage3" class="nav-link">Акустика</a></li>
                <li><a href="#stage4" class="nav-link">Психоакустика</a></li>
                <li><a href="#stage5" class="nav-link">Запись</a></li>
                <li><a href="#stage6" class="nav-link">Режиссура</a></li>
                <li><a href="#stage7" class="nav-link">Сторителлинг</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <section id="stage1" class="section">
            <div class="section-content text-center mb-12">
                <h2 class="text-4xl md:text-6xl font-bold text-green-400 mb-4" style="color:var(--accent-2)">
                    <span class="stage-title glow">Этап 1: Природа Звука</span>
                </h2>
                <p class="max-w-3xl mx-auto text-lg neon-text-light">Изучите фундаментальные основы. Управляйте параметрами звуковой волны в реальном времени, чтобы наглядно понять ее характеристики и поведение в различных средах.</p>
            </div>
            <div class="section-content w-full max-w-5xl glass-card glow-border">
                <div class="grid md:grid-cols-3 gap-8 items-center">
                    <div class="md:col-span-2">
                        <canvas id="soundWaveCanvas" class="w-full h-64 bg-transparent rounded-xl shadow-inner" aria-label="Визуализатор звуковой волны"></canvas>
                        <div class="flex items-center justify-between mt-3">
                            <div class="flex items-center gap-2"><span class="neon-dot floaty" aria-hidden="true"></span><span class="mini-legend" style="color:var(--muted)">Интерактивный визуализатор волны</span></div>
                            <div class="mini-legend" style="color:var(--muted)">Задавайте частоту и амплитуду</div>
                        </div>
                    </div>
                    <div class="space-y-6">
                        <div>
                            <label for="frequency" class="block mb-2 font-medium" style="color:var(--accent-2)">Частота: <span id="frequencyValue">440</span> Hz</label>
                            <input id="frequency" type="range" min="20" max="1000" value="440" step="1" class="w-full h-2 rounded-lg control-slider" aria-labelledby="frequencyValue">
                        </div>
                        <div>
                            <label for="amplitude" class="block mb-2 font-medium" style="color:var(--accent-2)">Громкость: <span id="amplitudeValue">50</span>%</label>
                            <input id="amplitude" type="range" min="0" max="100" value="50" class="w-full h-2 rounded-lg control-slider" aria-labelledby="amplitudeValue">
                        </div>
                        <div class="flex justify-center gap-4">
                            <button id="playBtn" class="neon-button text-white font-bold py-2 px-6 rounded-full transition-colors duration-200" aria-pressed="false">Включить звук</button>
                            <button id="stopBtn" class="neon-button text-white font-bold py-2 px-6 rounded-full transition-colors duration-200" style="background: rgba(244, 114, 182, 0.15); border-color:#f472b6; box-shadow:0 0 8px #f472b6, inset 0 0 4px #f472b6; text-shadow:0 0 4px #f472b6;" aria-pressed="false">Выключить</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="section-content w-full max-w-5xl mt-6">
                <div class="glass-card integrated-text">
                    <h4 class="text-xl font-bold stage-title">Природа звука и его характеристики</h4>
                    <div class="branch-tree">
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">1</span><h5>Шаг 1: Звук и его возникновение</h5></div>
                            <p>Механизм образования звуковых волн, их распространение в газах, жидкостях и твердых телах.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 1.1: Образование волн</h6>
                                    <p>Описание процесса вибрации и создания давления.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 1.2: Среды распространения</h6>
                                    <p>Сравнение газов, жидкостей и твердых тел.</p>
                                </div>
                            </div>
                        </div>
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">2</span><h5>Шаг 2: Линейные характеристики</h5></div>
                            <p>Амплитуда, частота, фаза и их роль в восприятии звука.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 2.1: Амплитуда</h6>
                                    <p>Влияние на громкость.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 2.2: Частота</h6>
                                    <p>Определение тона.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 2.3: Фаза</h6>
                                    <p>Синхронизация волн.</p>
                                </div>
                            </div>
                        </div>
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">3</span><h5>Шаг 3: Скорость звука</h5></div>
                            <p>Влияние среды, температуры и давления на скорость распространения.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 3.1: Факторы среды</h6>
                                    <p>Влияние плотности.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 3.2: Температура и давление</h6>
                                    <p>Математические зависимости.</p>
                                </div>
                            </div>
                        </div>
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">4</span><h5>Шаг 4: Звуковые волны</h5></div>
                            <p>Типы волн (продольные, поперечные), их свойства, взаимодействие с объектами.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 4.1: Типы волн</h6>
                                    <p>Продольные vs. поперечные.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 4.2: Свойства и взаимодействие</h6>
                                    <p>Отражение, преломление и т.д.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <svg class="wave-visual" viewBox="0 0 1440 320" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg"><path fill="url(#g1)" d="M0,64L48,90.7C96,117,192,171,288,197.3C384,224,480,224,576,197.3C672,171,768,117,864,85.3C960,53,1056,43,1152,48C1248,53,1344,75,1392,85.3L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z" opacity="0.18"></path><defs><linearGradient id="g1" x1="0" x2="1"><stop offset="0" stop-color="#0ea5e9" stop-opacity="0.18"></stop><stop offset="1" stop-color="#7dd3fc" stop-opacity="0.08"></stop></linearGradient></defs></svg>
        </section>
        <section id="stage2" class="section">
            <div class="section-content text-center mb-12">
                <h2 class="text-4xl md:text-6xl font-bold mb-4" style="color:var(--accent-2)">
                    <span class="stage-title glow">Этап 2: Распространение Звука</span>
                </h2>
                <p class="max-w-3xl mx-auto text-lg neon-text-light">Звук в пространстве подчиняется сложным законам. Изучите ключевые явления, которые определяют, как мы слышим звук в реальном мире.</p>
            </div>
            <div class="section-content w-full max-w-6xl mb-6">
                <div class="glass-card integrated-text">
                    <h4 class="text-xl font-bold stage-title">Распространение звука в пространстве</h4>
                    <div class="branch-tree">
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">1</span><h5>Шаг 1: Законы распространения</h5></div>
                            <p>Прямолинейное движение, рефракция, дифракция, интерференция, отражение, рассеивание, поглощение, закон обратных квадратов, дисперсия.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 1.1: Прямолинейное движение</h6>
                                    <p>Основной путь звука.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 1.2: Рефракция и дифракция</h6>
                                    <p>Изменение направления.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 1.3: Интерференция и отражение</h6>
                                    <p>Взаимодействие волн.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 1.4: Рассеивание и поглощение</h6>
                                    <p>Потеря энергии.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 1.5: Закон обратных квадратов и дисперсия</h6>
                                    <p>Расстояние и частота.</p>
                                </div>
                            </div>
                        </div>
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">2</span><h5>Шаг 2: Энергетические характеристики</h5></div>
                            <p>Интенсивность, мощность, звуковое давление и их измерение.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 2.1: Интенсивность и мощность</h6>
                                    <p>Энергетические метрики.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 2.2: Звуковое давление</h6>
                                    <p>Измерение в децибелах.</p>
                                </div>
                            </div>
                        </div>
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">3</span><h5>Шаг 3: Акустический резонанс</h5></div>
                            <p>Усиление звука при совпадении частот источника и системы.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 3.1: Условия резонанса</h6>
                                    <p>Совпадение частот.</p>
                                </div>
                            </div>
                        </div>
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">4</span><h5>Шаг 4: Сверхзвуковые эффекты</h5></div>
                            <p>Ударные волны и их особенности.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 4.1: Ударные волны</h6>
                                    <p>При сверхзвуковых скоростях.</p>
                                </div>
                            </div>
                        </div>
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">5</span><h5>Шаг 5: Физические законы</h5></div>
                            <p>Законы Гука, Ньютона-Лапласа, эффект Доплера.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 5.1: Закон Гука</h6>
                                    <p>Упругость.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 5.2: Ньютон-Лаплас</h6>
                                    <p>Скорость звука.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 5.3: Эффект Доплера</h6>
                                    <p>Изменение частоты.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="section-content w-full max-w-6xl grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="glass-card flex flex-col items-center justify-center p-8 relative overflow-hidden">
                    <h3 class="text-2xl font-bold mb-4 neon-text-light">Отражение (Рефлексия)</h3>
                    <p class="text-center neon-text-light">Звуковая волна отскакивает от поверхности, подобно свету от зеркала. Угол падения равен углу отражения. Это явление создает эхо и реверберацию.</p>
                    <svg class="absolute inset-0 w-full h-full pointer-events-none opacity-20" viewBox="0 0 200 200">
                        <line x1="100" y1="180" x2="100" y2="100" stroke="var(--neon)" stroke-width="2" />
                        <line class="reflection-line" x1="100" y1="100" x2="180" y2="100" stroke="var(--neon)" stroke-width="2" />
                        <circle cx="100" cy="180" r="5" fill="var(--accent-2)" />
                        <circle cx="180" cy="100" r="5" fill="var(--accent-2)" />
                        <circle cx="100" cy="180" r="10" stroke="var(--neon)" stroke-width="2" fill="none" class="sound-wave-anim"></circle>
                        <circle cx="100" cy="180" r="10" stroke="var(--neon)" stroke-width="2" fill="none" class="sound-wave-anim delay-1"></circle>
                        <circle cx="100" cy="180" r="10" stroke="var(--neon)" stroke-width="2" fill="none" class="sound-wave-anim delay-2"></circle>
                    </svg>
                </div>
                <div class="glass-card">
                    <h3 class="text-2xl font-bold mb-2 neon-text-light">Преломление (Рефракция)</h3>
                    <p class="neon-text-light">Волна изменяет направление при переходе из одной среды в другую или при изменении свойств среды.</p>
                </div>
                <div class="glass-card">
                    <h3 class="text-2xl font-bold mb-2 neon-text-light">Дифракция</h3>
                    <p class="neon-text-light">Способность звуковых волн огибать препятствия, позволяя слышать звук за углом.</p>
                </div>
                <div class="glass-card">
                    <h3 class="text-2xl font-bold mb-2 neon-text-light">Интерференция</h3>
                    <p class="neon-text-light">Сложение волн: конструктивная усиливает звук, деструктивная ослабляет.</p>
                </div>
                <div class="glass-card">
                    <h3 class="text-2xl font-bold mb-2 neon-text-light">Рассеивание</h3>
                    <p class="neon-text-light">Отражение звука от неровных поверхностей для равномерного звукового поля.</p>
                </div>
                <div class="glass-card">
                    <h3 class="text-2xl font-bold mb-2 neon-text-light">Поглощение</h3>
                    <p class="neon-text-light">Преобразование звуковой энергии в тепло мягкими материалами.</p>
                </div>
            </div>
        </section>
        <section id="stage3" class="section">
            <div class="section-content text-center mb-12">
                <h2 class="text-4xl md:text-6xl font-bold mb-4" style="color:var(--accent-2)">
                    <span class="stage-title glow">Этап 3: Акустика Помещений</span>
                </h2>
                <p class="max-w-3xl mx-auto text-lg neon-text-light">Поймите, как геометрия и материалы формируют акустическую среду.</p>
            </div>
            <div class="section-content w-full max-w-5xl space-y-6">
                <div class="glass-card">
                    <h3 class="text-2xl font-bold mb-2 neon-text-light">Реверберация</h3>
                    <p class="neon-text-light">Затухание звука в помещении после выключения источника, измеряемое RT60.</p>
                </div>
                <div class="glass-card">
                    <h3 class="text-2xl font-bold mb-2 neon-text-light">Акустическая Изоляция</h3>
                    <p class="neon-text-light">Снижение проникновения звука с помощью массивных материалов и виброразвязки.</p>
                </div>
                <div class="glass-card">
                    <h3 class="text-2xl font-bold mb-2 neon-text-light">Цифровое Моделирование</h3>
                    <p class="neon-text-light">Симуляция акустики помещений с помощью 3D-моделей.</p>
                </div>
                <div class="glass-card integrated-text">
                    <h4 class="text-xl font-bold stage-title">Акустика помещений</h4>
                    <div class="branch-tree">
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">1</span><h5>Шаг 1: Влияние материалов и геометрии</h5></div>
                            <p>Как материалы и форма помещений влияют на акустику.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 1.1: Материалы</h6>
                                    <p>Поглощение и отражение.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 1.2: Геометрия</h6>
                                    <p>Форма и размеры.</p>
                                </div>
                            </div>
                        </div>
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">2</span><h5>Шаг 2: Реверберация</h5></div>
                            <p>Многократные отражения звука, их измерение и воздействие.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 2.1: Отражения</h6>
                                    <p>Множественные эхо.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 2.2: Измерение</h6>
                                    <p>RT60.</p>
                                </div>
                            </div>
                        </div>
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">3</span><h5>Шаг 3: Акустическая изоляция</h5></div>
                            <p>Методы снижения внешних шумов.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 3.1: Материалы</h6>
                                    <p>Массивные конструкции.</p>
                                </div>
                            </div>
                        </div>
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">4</span><h5>Шаг 4: Цифровое моделирование</h5></div>
                            <p>Использование ПО для симуляции акустики помещений.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 4.1: 3D-модели</h6>
                                    <p>Симуляция распространения.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section id="stage4" class="section">
            <div class="section-content text-center mb-12">
                <h2 class="text-4xl md:text-6xl font-bold mb-4" style="color:var(--accent-2)">
                    <span class="stage-title glow">Этап 4: Психоакустика</span>
                </h2>
                <p class="max-w-3xl mx-auto text-lg neon-text-light">Узнайте, как мозг интерпретирует звуки, через кривые равной громкости.</p>
            </div>
            <div class="section-content w-full max-w-5xl glass-card glow-border">
                <div class="chart-container">
                    <canvas id="psychoacousticsChart"></canvas>
                </div>
            </div>
            <div class="section-content w-full max-w-5xl mt-6">
                <div class="glass-card integrated-text">
                    <h4 class="text-xl font-bold stage-title">Психоакустика</h4>
                    <div class="branch-tree">
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">1</span><h5>Шаг 1: Физиология слуха</h5></div>
                            <p>Строение слухового аппарата, процесс восприятия звуков.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 1.1: Строение уха</h6>
                                    <p>Внешнее, среднее, внутреннее.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 1.2: Процесс восприятия</h6>
                                    <p>От волны к сигналу мозга.</p>
                                </div>
                            </div>
                        </div>
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">2</span><h5>Шаг 2: Восприятие частоты и амплитуды</h5></div>
                            <p>Чувствительность слуха к разным частотам и громкости.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 2.1: Частота</h6>
                                    <p>Диапазон слуха.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 2.2: Амплитуда</h6>
                                    <p>Громкость.</p>
                                </div>
                            </div>
                        </div>
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">3</span><h5>Шаг 3: Кривые равной громкости</h5></div>
                            <p>Графики восприятия громкости на разных частотах.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 3.1: ISO 226</h6>
                                    <p>Стандартные кривые.</p>
                                </div>
                            </div>
                        </div>
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">4</span><h5>Шаг 4: Маскировка звуков</h5></div>
                            <p>Подавление одного звука другим (громким или близким по частоте).</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 4.1: Частотная маскировка</h6>
                                    <p>Близкие частоты.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 4.2: Временная маскировка</h6>
                                    <p>Последовательные звуки.</p>
                                </div>
                            </div>
                        </div>
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">5</span><h5>Шаг 5: Пространственный звук</h5></div>
                            <p>Как человек воспринимает направление и расстояние звука.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 5.1: Направление</h6>
                                    <p>Бинауральные подсказки.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 5.2: Расстояние</h6>
                                    <p>Аттенуация и реверб.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section id="stage5" class="section">
            <div class="section-content text-center mb-12">
                <h2 class="text-4xl md:text-6xl font-bold mb-4" style="color:var(--accent-2)">
                    <span class="stage-title glow">Этап 5: Звукозапись и Обработка</span>
                </h2>
                <p class="max-w-3xl mx-auto text-lg neon-text-light">Освойте инструменты и техники создания аудиоконтента.</p>
            </div>
            <div class="section-content w-full max-w-5xl mb-6">
                <div class="glass-card integrated-text">
                    <h4 class="text-xl font-bold stage-title">Звукозапись и обработка</h4>
                    <div class="branch-tree">
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">1</span><h5>Шаг 1: Оборудование</h5></div>
                            <p>Микрофоны, аудиоинтерфейсы, рекордеры.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 1.1: Микрофоны</h6>
                                    <p>Типы и выбор.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 1.2: Аудиоинтерфейсы</h6>
                                    <p>Подключение.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 1.3: Рекордеры</h6>
                                    <p>Портативные устройства.</p>
                                </div>
                            </div>
                        </div>
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">2</span><h5>Шаг 2: Техники записи</h5></div>
                            <p>Запись вокала, инструментов, амбиентных звуков.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 2.1: Вокал</h6>
                                    <p>Техники захвата.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 2.2: Инструменты</h6>
                                    <p>Микширование.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 2.3: Амбиент</h6>
                                    <p>Полевая запись.</p>
                                </div>
                            </div>
                        </div>
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">3</span><h5>Шаг 3: Цифровая обработка</h5></div>
                            <p>Работа в DAW, редактирование, эквализация, компрессия.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 3.1: DAW</h6>
                                    <p>Интерфейс и функции.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 3.2: Редактирование</h6>
                                    <p>Обрезка и монтаж.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 3.3: EQ и компрессия</h6>
                                    <p>Коррекция.</p>
                                </div>
                            </div>
                        </div>
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">4</span><h5>Шаг 4: Синтез звука</h5></div>
                            <p>Субтрактивный, FM, гранулярный синтез.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 4.1: Субтрактивный</h6>
                                    <p>Фильтры.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 4.2: FM</h6>
                                    <p>Модуляция.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 4.3: Гранулярный</h6>
                                    <p>Гранулы.</p>
                                </div>
                            </div>
                        </div>
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">5</span><h5>Шаг 5: Микрофонные технологии</h5></div>
                            <p>Особенности микрофонов для студий, подкастов, игр.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 5.1: Студийные</h6>
                                    <p>Конденсаторные.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 5.2: Подкасты</h6>
                                    <p>Динамические.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 5.3: Игры</h6>
                                    <p>Направленные.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="accordion-container-5" class="section-content w-full max-w-5xl space-y-4"></div>
        </section>
        <section id="stage6" class="section">
            <div class="section-content text-center mb-12">
                <h2 class="text-4xl md:text-6xl font-bold mb-4" style="color:var(--accent-2)">
                    <span class="stage-title glow">Этап 6: Звукорежиссура в Медиа</span>
                </h2>
                <p class="max-w-3xl mx-auto text-lg neon-text-light">Изучите создание звуковых миров для кино, игр и VR.</p>
            </div>
            <div class="section-content w-full max-w-5xl mb-6">
                <div class="glass-card integrated-text">
                    <h4 class="text-xl font-bold stage-title">Звукорежиссура в медиа</h4>
                    <div class="branch-tree">
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">1</span><h5>Шаг 1: Звук в кино</h5></div>
                            <p>Создание диалогов, эффектов, музыки для фильмов.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 1.1: Диалоги</h6>
                                    <p>Чистота и синхронизация.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 1.2: Эффекты</h6>
                                    <p>SFX.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 1.3: Музыка</h6>
                                    <p>Саундтрек.</p>
                                </div>
                            </div>
                        </div>
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">2</span><h5>Шаг 2: Звук в играх</h5></div>
                            <p>Динамическое аудио и интерактивные элементы.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 2.1: Динамическое аудио</h6>
                                    <p>Адаптация к действиям.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 2.2: Интерактивные элементы</h6>
                                    <p>Звуковой дизайн.</p>
                                </div>
                            </div>
                        </div>
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">3</span><h5>Шаг 3: Звук в VR/AR</h5></div>
                            <p>Пространственное аудио для виртуальной реальности.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 3.1: Пространственное аудио</h6>
                                    <p>3D-звук.</p>
                                </div>
                            </div>
                        </div>
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">4</span><h5>Шаг 4: Бинауральный звук</h5></div>
                            <p>Техники записи для эффекта присутствия.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 4.1: Запись</h6>
                                    <p>HRTF.</p>
                                </div>
                            </div>
                        </div>
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">5</span><h5>Шаг 5: Пространственный звук</h5></div>
                            <p>Технологии 3D-аудио для игр и кино.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 5.1: Технологии</h6>
                                    <p>Dolby Atmos, Ambisonics.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="accordion-container-6" class="section-content w-full max-w-5xl space-y-4"></div>
        </section>
        <section id="stage7" class="section">
            <div class="section-content text-center mb-12">
                <h2 class="text-4xl md:text-6xl font-bold mb-4" style="color:var(--accent-2)">
                    <span class="stage-title glow">Этап 7: Сторителлинг через Звук</span>
                </h2>
                <p class="max-w-3xl mx-auto text-lg neon-text-light">Используйте звук для создания эмоций и атмосферы.</p>
            </div>
            <div class="section-content w-full max-w-5xl mb-6">
                <div class="glass-card integrated-text">
                    <h4 class="text-xl font-bold stage-title">Сторителлинг через звук</h4>
                    <div class="branch-tree">
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">1</span><h5>Шаг 1: Основы сторителлинга</h5></div>
                            <p>Принципы создания повествования.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 1.1: Структура</h6>
                                    <p>Завязка, кульминация, развязка.</p>
                                </div>
                                <div class="branch-card">
                                    <h6>Ветка 1.2: Персонажи и конфликт</h6>
                                    <p>Развитие сюжета.</p>
                                </div>
                            </div>
                        </div>
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">2</span><h5>Шаг 2: Звук и эмоции</h5></div>
                            <p>Влияние звука на эмоциональное восприятие.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 2.1: Паттерны и частоты</h6>
                                    <p>Эмоциональное воздействие.</p>
                                </div>
                            </div>
                        </div>
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">3</span><h5>Шаг 3: Звуковая драматургия</h5></div>
                            <p>Звуковые решения для усиления сюжета.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 3.1: Саспенс</h6>
                                    <p>Предвещание событий.</p>
                                </div>
                            </div>
                        </div>
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">4</span><h5>Шаг 4: Интерактивный сторителлинг</h5></div>
                            <p>Аудиоистории с использованием современных технологий.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 4.1: Влияние пользователя</h6>
                                    <p>Адаптация сюжета.</p>
                                </div>
                            </div>
                        </div>
                        <div class="step-block">
                            <div class="stage-progress"><span class="step-number">5</span><h5>Шаг 5: ИИ в сторителлинге</h5></div>
                            <p>Применение ИИ для интерактивных аудиорешений.</p>
                            <div class="branch-container">
                                <div class="branch-card">
                                    <h6>Ветка 5.1: Генерация</h6>
                                    <p>Адаптивные ландшафты.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="accordion-container-7" class="section-content w-full max-w-5xl space-y-4"></div>
        </section>
    </main>
    <script>
        /* Background Animation (Simplified Particles) */
        (function(){
            const c = document.getElementById('bgCanvas');
            const ctx = c.getContext('2d');
            let w = 0, h = 0, dpr = window.devicePixelRatio || 1;
            let particles = [];
            const PARTICLE_COUNT = 20; // Further reduced for performance

            function resize() {
                try {
                    dpr = window.devicePixelRatio || 1;
                    w = window.innerWidth;
                    h = window.innerHeight;
                    c.width = w * dpr;
                    c.height = h * dpr;
                    c.style.width = w + 'px';
                    c.style.height = h + 'px';
                    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
                    initParticles();
                } catch (e) {
                    console.error('Canvas resize error:', e);
                }
            }

            function rand(min, max) { return Math.random() * (max - min) + min; }

            function initParticles() {
                particles = [];
                for (let i = 0; i < PARTICLE_COUNT; i++) {
                    particles.push({
                        x: rand(0, w),
                        y: rand(0, h),
                        r: rand(1, 3),
                        vx: rand(-0.2, 0.2),
                        vy: rand(-0.2, 0.2),
                        alpha: rand(0.1, 0.4)
                    });
                }
            }

            function drawParticles() {
                try {
                    ctx.clearRect(0, 0, c.width, c.height);
                    particles.forEach(p => {
                        p.x += p.vx;
                        p.y += p.vy;
                        if (p.x < -20) p.x = w + 20;
                        if (p.x > w + 20) p.x = -20;
                        if (p.y < -20) p.y = h + 20;
                        if (p.y > h + 20) p.y = -20;
                        ctx.beginPath();
                        ctx.fillStyle = `rgba(125,211,252,${p.alpha})`;
                        ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
                        ctx.fill();
                    });
                    requestAnimationFrame(drawParticles);
                } catch (e) {
                    console.error('Particle animation error:', e);
                }
            }

            window.addEventListener('resize', resize);
            resize();
            drawParticles();
        })();

        /* Interactive Audio and Sound Wave Visualization */
        document.addEventListener('DOMContentLoaded', () => {
            const canvas = document.getElementById('soundWaveCanvas');
            const ctx = canvas.getContext('2d');
            const frequencySlider = document.getElementById('frequency');
            const amplitudeSlider = document.getElementById('amplitude');
            const frequencyValue = document.getElementById('frequencyValue');
            const amplitudeValue = document.getElementById('amplitudeValue');
            const playBtn = document.getElementById('playBtn');
            const stopBtn = document.getElementById('stopBtn');
            let width, height, oscillator;

            function resizeCanvas() {
                try {
                    const dpr = window.devicePixelRatio || 1;
                    const rect = canvas.getBoundingClientRect();
                    canvas.width = rect.width * dpr;
                    canvas.height = rect.height * dpr;
                    canvas.style.width = rect.width + 'px';
                    canvas.style.height = rect.height + 'px';
                    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
                    width = rect.width;
                    height = rect.height;
                } catch (e) {
                    console.error('Canvas resize error:', e);
                }
            }

            function drawWave() {
                try {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    const frequency = parseFloat(frequencySlider.value);
                    const amplitude = parseFloat(amplitudeSlider.value);
                    frequencyValue.textContent = frequency.toFixed(0);
                    amplitudeValue.textContent = amplitude.toFixed(0);

                    ctx.beginPath();
                    ctx.strokeStyle = 'rgba(52,211,153,0.9)';
                    ctx.lineWidth = 2;
                    for (let x = 0; x < width; x++) {
                        const y = height / 2 + (amplitude / 100 * 50) * Math.sin(x * (frequency / 1000) * Math.PI + Date.now() / 500);
                        if (x === 0) ctx.moveTo(x, y);
                        else ctx.lineTo(x, y);
                    }
                    ctx.stroke();
                    requestAnimationFrame(drawWave);
                } catch (e) {
                    console.error('Wave drawing error:', e);
                }
            }

            async function startAudio() {
                try {
                    if (Tone.context.state !== 'running') {
                        await Tone.start();
                    }
                    if (!oscillator) {
                        oscillator = new Tone.Oscillator({
                            frequency: parseFloat(frequencySlider.value),
                            volume: -20
                        }).toDestination();
                        oscillator.start();
                    }
                    playBtn.setAttribute('aria-pressed', 'true');
                    stopBtn.setAttribute('aria-pressed', 'false');
                } catch (e) {
                    console.error('Audio start error:', e);
                }
            }

            function stopAudio() {
                try {
                    if (oscillator) {
                        oscillator.stop();
                        oscillator = null;
                    }
                    playBtn.setAttribute('aria-pressed', 'false');
                    stopBtn.setAttribute('aria-pressed', 'true');
                } catch (e) {
                    console.error('Audio stop error:', e);
                }
            }

            function updateAudioParams() {
                try {
                    if (oscillator) {
                        oscillator.frequency.setValueAtTime(parseFloat(frequencySlider.value), Tone.now());
                        oscillator.volume.value = -20 + (parseFloat(amplitudeSlider.value) / 100 * 20);
                    }
                } catch (e) {
                    console.error('Audio params update error:', e);
                }
            }

            frequencySlider.addEventListener('input', () => { updateAudioParams(); });
            amplitudeSlider.addEventListener('input', () => { updateAudioParams(); });
            playBtn.addEventListener('click', startAudio);
            stopBtn.addEventListener('click', stopAudio);
            window.addEventListener('resize', resizeCanvas);
            resizeCanvas();
            drawWave();

            /* Psychoacoustics Chart */
            try {
                const chartCtx = document.getElementById('psychoacousticsChart').getContext('2d');
                new Chart(chartCtx, {
                    type: 'line',
                    data: {
                        labels: ['20', '50', '100', '200', '500', '1k', '2k', '4k', '8k', '16k'],
                        datasets: [
                            {
                                label: '40 Фон (тихо)',
                                data: [90, 62, 49, 38, 32, 40, 35, 22, 30, 50],
                                borderColor: '#60a5fa',
                                backgroundColor: '#60a5fa20',
                                tension: 0.4,
                                borderWidth: 3
                            },
                            {
                                label: '70 Фон (нормально)',
                                data: [105, 82, 74, 68, 65, 70, 68, 60, 64, 78],
                                borderColor: '#a855f7',
                                backgroundColor: '#a855f720',
                                tension: 0.4,
                                borderWidth: 3
                            },
                            {
                                label: '100 Фон (громко)',
                                data: [120, 108, 103, 100, 98, 100, 100, 95, 100, 105],
                                borderColor: '#f472b6',
                                backgroundColor: '#f472b620',
                                tension: 0.4,
                                borderWidth: 3
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Кривые равной громкости (ISO 226:2003)',
                                color: '#e2e8f0',
                                font: { size: 18, family: 'Orbitron' }
                            },
                            legend: { labels: { color: '#e2e8f0', font: { size: 14 } } }
                        },
                        scales: {
                            x: {
                                title: { display: true, text: 'Частота (Гц)', color: '#e2e8f0', font: { size: 14, family: 'Roboto' } },
                                ticks: { color: '#e2e8f0' },
                                grid: { color: 'rgba(125,211,252,0.1)' }
                            },
                            y: {
                                title: { display: true, text: 'Уровень звукового давления (дБ SPL)', color: '#e2e8f0', font: { size: 14, family: 'Roboto' } },
                                ticks: { color: '#e2e8f0' },
                                grid: { color: 'rgba(125,211,252,0.1)' }
                            }
                        }
                    }
                });
            } catch (e) {
                console.error('Chart error:', e);
            }

            /* Navigation Highlighting */
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('.section');

            function updateNavHighlight() {
                try {
                    let current = '';
                    sections.forEach(section => {
                        const sectionTop = section.offsetTop;
                        const sectionHeight = section.clientHeight;
                        if (window.scrollY >= sectionTop - sectionHeight / 3) {
                            current = section.getAttribute('id');
                        }
                    });
                    navLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href').substring(1) === current) {
                            link.classList.add('active');
                        }
                    });
                } catch (e) {
                    console.error('Nav highlight error:', e);
                }
            }

            window.addEventListener('scroll', updateNavHighlight);
            window.addEventListener('resize', updateNavHighlight);
            updateNavHighlight();

            /* Smooth Scroll for Navigation */
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = link.getAttribute('href').substring(1);
                    const targetSection = document.getElementById(targetId);
                    if (targetSection) {
                        window.scrollTo({
                            top: targetSection.offsetTop - 100,
                            behavior: 'smooth'
                        });
                    }
                });
            });

            /* Accordion Functionality */
            const accordionData = {
                stage5: [
                    { title: 'Типы микрофонов', content: 'Конденсаторные микрофоны обеспечивают высокое качество записи, динамические — устойчивость к громким звукам, ленточные — теплый звук.' },
                    { title: 'Техники записи вокала', content: 'Используйте поп-фильтр, выбирайте правильное расстояние (15-20 см), контролируйте акустику помещения.' },
                    { title: 'Цифровая обработка', content: 'Эквализация убирает нежелательные частоты, компрессия сглаживает динамику, реверберация добавляет глубину.' }
                ],
                stage6: [
                    { title: 'Звук в кино', content: 'Диалоги записываются с синхронизацией, эффекты создаются в постпродакшене, музыка подчеркивает эмоции.' },
                    { title: 'Звук в играх', content: 'Динамическое аудио адаптируется к действиям игрока, создавая иммерсивный опыт.' },
                    { title: 'Пространственный звук', content: 'Технологии Dolby Atmos и Ambisonics обеспечивают 3D-аудио для VR и кино.' }
                ],
                stage7: [
                    { title: 'Эмоции через звук', content: 'Низкие частоты создают напряжение, высокие — легкость, тишина усиливает драматизм.' },
                    { title: 'Звуковая драматургия', content: 'Звук направляет внимание слушателя, подчеркивая ключевые моменты сюжета.' },
                    { title: 'ИИ в сторителлинге', content: 'ИИ может генерировать адаптивные саундтреки, реагирующие на действия пользователя.' }
                ]
            };

            function createAccordion(containerId, items) {
                try {
                    const container = document.getElementById(containerId);
                    if (!container) return;
                    items.forEach((item, index) => {
                        const accordionItem = document.createElement('div');
                        accordionItem.classList.add('glass-card', 'glow-border');
                        accordionItem.innerHTML = `
                            <button class="accordion-button neon-text-light text-left text-lg font-medium py-4 px-6" aria-expanded="false" aria-controls="accordion-content-${containerId}-${index}">
                                <span>${item.title}</span>
                                <svg class="w-6 h-6 transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                            </button>
                            <div id="accordion-content-${containerId}-${index}" class="accordion-content neon-text-light px-6 pb-4 text-base" style="max-height: 0;">
                                <p>${item.content}</p>
                            </div>
                        `;
                        container.appendChild(accordionItem);

                        const button = accordionItem.querySelector('.accordion-button');
                        const content = accordionItem.querySelector('.accordion-content');
                        button.addEventListener('click', () => {
                            try {
                                const isOpen = button.getAttribute('aria-expanded') === 'true';
                                button.setAttribute('aria-expanded', !isOpen);
                                content.style.maxHeight = isOpen ? '0' : `${content.scrollHeight}px`;
                                button.querySelector('svg').style.transform = isOpen ? 'rotate(0deg)' : 'rotate(180deg)';
                            } catch (e) {
                                console.error('Accordion toggle error:', e);
                            }
                        });
                    });
                } catch (e) {
                    console.error('Accordion creation error:', e);
                }
            }

            createAccordion('accordion-container-5', accordionData.stage5);
            createAccordion('accordion-container-6', accordionData.stage6);
            createAccordion('accordion-container-7', accordionData.stage7);

            /* Cleanup on page unload */
            window.addEventListener('unload', () => {
                try {
                    if (oscillator && oscillator.state === 'started') {
                        oscillator.stop();
                    }
                } catch (e) {
                    console.error('Cleanup error:', e);
                }
            });
        });
    </script>
</body>
</html>
